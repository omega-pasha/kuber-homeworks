# Домашнее задание к занятию «Компоненты Kubernetes»

### Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения. 
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии. 
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий. 
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.
6. Сначала сделайте расчёт всех необходимых ресурсов.
7. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
8. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды. 
9. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные. 
10. В результате должно быть указано количество нод и их параметры.

----

 #### Шаг 1: Расчет суммарных ресурсов

| Тип  | Количество | Ядра | ОЗУ   |
|------|------------|------|-------|
| БД   | 3          | 3    | 12    |
| Кеш  | 3          | 3    | 12    |
| Фронт| 5          | 1    | 0.25  |
| Бек  | 10         | 10   | 0.6   |
| Итого| 21         | 17   | 24.85 |

#### Шаг 2: Учет запаса и служебных ресурсов

Учтем запас для возможных сбоев: прибавим 1 рабочую ноду ко всему кластеру.
Также учтем служебные ресурсы, которые могут потребоваться для работы самого Kubernetes.
Для удобства, предположим, что на каждой рабочей ноде у нас есть 4 ядра и 16 ГБ ОЗУ. Различные типы нод могут иметь разные конфигурации, но для данного расчета будем использовать одну общую конфигурацию.

Исходя из этого:
 
Каждая нода сможет обслуживать 16 / 12 ≈ 1.33 БД (округлим до 1).  
Каждая нода сможет обслуживать 16 / 12 ≈ 1.33 системы кеширования (округлим до 1).  
Каждая нода сможет обслуживать 16 / 0,25 = 64 фронтенда.  
Каждая нода сможет обслуживать 4 / 0,6 ≈ 6.67 бекендов (округлим до 6). 

#### Шаг 4: Расчет количества нод

Теперь, исходя из рассчитанных значений, мы можем определить количество нод для каждого типа:
 
БД: 3 / 1 ≈ 3 ноды.  
Кеш: 3 / 1 ≈ 3 ноды.  
Фронтенд: 5 / 64 ≈ 0.08. Округлим до 1 ноды.  
Бекенд: 10 / 6 ≈ 1.67. Округлим до 2 нод. 
Итак, общее количество рабочих нод составляет 3 (БД) + 3 (кеш) + 1 (фронтенд) + 2 (бекенд) + 1 (запас) = 10 нод.

Итоговая конфигурация одной рабочей ноды:

Ядра: 4  
ОЗУ: 16 ГБ







